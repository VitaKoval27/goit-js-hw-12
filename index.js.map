{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from '../main';\nlet photo;\nfunction createGallery(images) {\n  const img = images\n    .map(\n      ({\n        downloads,\n        likes,\n        comments,\n        views,\n        tags,\n        webformatURL,\n        largeImageURL,\n      }) => `\n          <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n          <ul class=\"info-wrapper\">\n          <li class=\"info-item\"><span>likes</span>${likes}</li>\n          <li class=\"info-item\"><span>Downloads</span>${downloads}</li>\n          <li class=\"info-item\"><span>Comments</span>${comments}</li>\n          <li class=\"info-item\"><span>Views</span>${views}</li>\n          </ul>\n          </a> \n          </li>  \n    `\n    )\n    .join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', img);\n  if (!photo) {\n    photo = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n  } else {\n    photo.refresh();\n  }\n}\nfunction clearGallery() {\n  refs.gallery.innerHTML = '';\n}\nfunction showLoader() {\n  refs.loader.classList.add('is-open');\n}\nfunction hideLoader() {\n  refs.loader.classList.remove('is-open');\n}\nfunction showLoadMoreButton() {\n  refs.more.classList.remove('hidden');\n}\nfunction hideLoadMoreButton() {\n  refs.more.classList.add('hidden');\n}\n\nexport {\n  hideLoadMoreButton,\n  showLoadMoreButton,\n  hideLoader,\n  showLoader,\n  clearGallery,\n  createGallery,\n};\n","import axios from 'axios';\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '51327583-eda9110ddf8c3e7e62438a086',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  });\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n  createGallery,\n  clearGallery,\n  hideLoader,\n  showLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\nimport { getImagesByQuery } from './js/pixabay-api';\n\nexport const refs = {\n  form: document.querySelector('.form'),\n  loader: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery'),\n  btn: document.querySelector('.search-button'),\n  input: document.querySelector('input[name=\"search-text\"]'),\n  more: document.querySelector('.load-more'),\n};\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.more.addEventListener('click', loadMore);\n\nconst PER_PAGE = 15;\nlet page;\nlet query = '';\n\nasync function onSubmit(event) {\n  event.preventDefault();\n\n  page = 1;\n  query = refs.input.value.trim();\n\n  if (!query) {\n    iziToast.info({\n      title: '(',\n      message: 'You must enter something to search.',\n      position: 'topRight',\n    });\n    return;\n  }\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n  try {\n    const responseData = await getImagesByQuery(query, page);\n    if (responseData.hits.length === 0) {\n      iziToast.error({\n        title: '(',\n        message: `Sorry, no images found matching your search ${query}. Please try again!`,\n        position: 'topRight',\n      });\n      return;\n    } else {\n      createGallery(responseData.hits);\n\n      if (responseData.totalHits > page * PER_PAGE) {\n        showLoadMoreButton();\n      } else {\n        hideLoadMoreButton();\n        iziToast.info({\n          title: '*',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: '(',\n      message: `Something went wrong! Please try your search again.${error}`,\n    });\n    console.log(error);\n  } finally {\n    hideLoader();\n    refs.form.reset();\n  }\n}\nasync function loadMore() {\n  page += 1;\n  hideLoadMoreButton();\n  showLoader();\n  try {\n    const newResponseData = await getImagesByQuery(query, page);\n\n    createGallery(newResponseData.hits);\n\n    const { height: cardHeight } =\n      refs.gallery.firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (newResponseData.totalHits <= page * PER_PAGE) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: '*',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: '(',\n      message: `Something went wrong! Please try your search again.${error}`,\n    });\n    console.log(error);\n    hideLoadMoreButton();\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["photo","createGallery","images","img","downloads","likes","comments","views","tags","webformatURL","largeImageURL","refs","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","getImagesByQuery","query","page","axios","onSubmit","loadMore","PER_PAGE","event","iziToast","responseData","error","newResponseData","cardHeight"],"mappings":"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"}